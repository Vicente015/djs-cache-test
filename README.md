# djs-cache-test

This is a test to compare the data received on events between discord.js-light v4 and discord.js v13 with the new option to disable caches.
All tests have been done with all intents and partials enabled.
You can see the code used in `index.js`.

**This does not take into account what happens if you disable the guild cache because it completely breaks everything.**

## Events

| Event                      | Emits in djs-light       | Notes in djs-light                                           | Emits in djs                                                 | Notes in djs                                                 | Managers with cache at 0             |
| :------------------------- | :----------------------- | :----------------------------------------------------------- | :----------------------------------------------------------- | ------------------------------------------------------------ | ------------------------------------ |
| channelCreate              | Channel                  |                                                              | Channel                                                      |                                                              | ChannelManager, GuildChannelManager  |
| channelDelete              | Channel                  |                                                              | Channel?                                                     | Only emits if channels are cached                            | ChannelManager, GuildChannelManager  |
| channelPinsUpdate          | Channel, Date            |                                                              | Channel?                                                     | Only emits if channels are cached                            | ChannelManager, GuildChannelManager  |
| channelUpdate              | Channel?, Channel        |                                                              | Channel?, Channel?                                           | Only emits if channels are cached                            | ChannelManager, GuildChannelManager  |
| emojiCreate                | Emoji                    |                                                              | Emoji                                                        | If GuildEmojiManager is disabled, it is emitted with every emoji on the server and not only with the new emoji. | BaseGuildEmojiManager                |
| emojiDelete                | Emoji                    |                                                              | Emoji                                                        | If GuildEmojiManager is disabled it is not emitted, instead emits emojiCreate for each emoji that has not been deleted. | BaseGuildEmojiManager                |
| emojiUpdate                | Emoji, Emoji             |                                                              | Emoji,Emoji                                                  | If GuildEmojiManager is disabled it is not emitted, instead it emits emojiCreate with the new emoji data. | BaseGuildEmojiManager                |
| guildBanAdd                | Guild, User              |                                                              | [GuildBan](https://discord.js.org/#/docs/main/master/class/GuildBan) | GuildBan is partial and only includes guild and user data    | GuildBanManager                      |
| guildBanRemove             | Guild, User              |                                                              | [GuildBan](https://discord.js.org/#/docs/main/master/class/GuildBan) | GuildBan is partial and only includes guild and user data    | GuildBanManager                      |
| guildCreate                | Guild                    |                                                              | Guild                                                        |                                                              | GuildManager                         |
| guildDelete                | Guild                    |                                                              | Guild?                                                       | Only emits if guilds are cached                              | GuildManager                         |
| guildEmojisUpdate          | Collection               | Non-standard event. Emitted instead of Emoji events when Emojis are not cached. Provides a Collection of updated Emojis | -                                                            | -                                                            | -                                    |
| guildIntegrationsUpdate    | Guild                    |                                                              |                                                              | I don't know how to test this                                | -                                    |
| guildMemberAdd             | Member                   |                                                              | Member                                                       | Crashes if RoleManager is also disabled.                     | GuildMemberManager                   |
| guildMemberRemove          | Member                   |                                                              | Member                                                       | Partial member if not cached. Crashes if RoleManager is also disabled. | GuildMemberManager                   |
| guildMemberUpdate          | Member?, Member          |                                                              | OldMember, NewMember                                         | OldMember is partial if not cached. Crashes if RoleManager is also disabled. | GuildMemberManager                   |
| guildUnavailable           | Guild                    |                                                              |                                                              |                                                              |                                      |
| guildUpdate                | Guild?, Guild            |                                                              | Guild?, Guild?                                               | Only emits if guilds are cached                              | GuildManager                         |
| interactionCreate          |                          |                                                              |                                                              |                                                              | -                                    |
| inviteCreate               | Invite                   |                                                              | Invite                                                       | Only emits if channels are cached                            | GuildInviteManager                   |
| inviteDelete               | Invite                   |                                                              | Invite                                                       | Only emits if channels are cached                            | GuildInviteManager                   |
| messageCreate              | Message                  |                                                              | Message?                                                     | Only emits if messages, channels and guilds are cached       | MessageManager                       |
| messageDelete              | Message                  |                                                              | Message                                                      | Partial message if not cached, only emits if the channel is cached | MessageManager                       |
| messageDeleteBulk          | Collection               |                                                              | Collection                                                   | Collection of deleted messages or partial messages as above, only emits if the channel is cached | MessageManager                       |
| messageReactionAdd         | Reaction, User           |                                                              | Reaction, User                                               | Partial reaction, partial user if not cached. Only emits if channels are cached. | ReactionManager, ReactionUserManager |
| messageReactionRemove      | Reaction, User           |                                                              | Reaction, User                                               | Partial reaction, partial user if not cached. Only emits if channels are cached. | ReactionManager, ReactionUserManager |
| messageReactionRemoveAll   | Message                  |                                                              | Message                                                      | Partial message always. Only emits if channels are cached.   | ReactionManager, ReactionUserManager |
| messageReactionRemoveEmoji | Reaction                 |                                                              | Reaction                                                     | Partial reaction. Only emits if channels are cached.         | ReactionManager, ReactionUserManager |
| messageUpdate              | Message?, Message        |                                                              | Message?, Message                                            | Only emits if channels are cached.                           | MessageManager                       |
| presenceUpdate             | Presence?, Presence      |                                                              | Presence?, Presence?                                         | Only emits if guild members and users are cached.            | PresenceManager                      |
| roleCreate                 | Role                     |                                                              | Role                                                         |                                                              | RoleManager                          |
| roleDelete                 | Role                     |                                                              | Role?                                                        | Only emits if roles are cached.                              | RoleManager                          |
| roleUpdate                 | Role?, Role              |                                                              | Role?, Role?                                                 | Only emits if roles are cached.                              | RoleManager                          |
| stageInstanceCreate        |                          |                                                              |                                                              | -                                                            | StageInstanceManager                 |
| stageInstanceDelete        |                          |                                                              |                                                              | -                                                            | StageInstanceManager                 |
| stageInstanceUpdate        |                          |                                                              |                                                              | -                                                            | StageInstanceManager                 |
| stickerCreate              |                          |                                                              |                                                              | -                                                            | GuildStickerManager                  |
| stickerDelete              |                          |                                                              |                                                              | -                                                            | GuildStickerManager                  |
| stickerUpdate              |                          |                                                              |                                                              | -                                                            | GuildStickerManager                  |
| threadCreate               |                          |                                                              |                                                              | -                                                            | ThreadManager                        |
| threadDelete               |                          |                                                              |                                                              | -                                                            | ThreadManager                        |
| threadListSync             |                          |                                                              |                                                              | -                                                            | ThreadManager, ThreadMemberManager   |
| threadMembersUpdate        |                          |                                                              |                                                              | -                                                            | ThreadManager, ThreadMemberManager   |
| threadMemberUpdate         |                          |                                                              |                                                              | -                                                            | ThreadManager, ThreadMemberManager   |
| threadUpdate               |                          |                                                              |                                                              | -                                                            | ThreadManager                        |
| typingStart                | Typing                   |                                                              | Typing                                                       | Only emits if channels are cached.                           | -                                    |
| userUpdate                 | User?, User              |                                                              | oldUser?, newUser                                            | Crashes if the user is not cached.                           | UserManager, GuildMemberManager      |
| voiceStateUpdate           | VoiceState?, VoiceState? |                                                              | VoiceState, VoiceState                                       | Includes some partial data.                                  | VoiceStateManager                    |
| webhookUpdate              | Channel                  |                                                              | Channel                                                      | Only emits if channels are cached.                           | -                                    |

